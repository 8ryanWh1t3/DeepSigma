{
  "name": "sigma-overwatch-mcp",
  "version": "0.2.0",
  "tools": [
    {
      "name": "overwatch.submit_task",
      "description": "Start a supervised decision episode by decisionType (loads DTE) and returns a session_id.",
      "inputSchema": {
        "type": "object",
        "required": [
          "decisionType",
          "payload",
          "actor"
        ],
        "properties": {
          "decisionType": {
            "type": "string"
          },
          "payload": {
            "type": "object"
          },
          "actor": {
            "type": "object",
            "required": [
              "id"
            ],
            "properties": {
              "id": {
                "type": "string"
              },
              "version": {
                "type": "string"
              }
            }
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "session_id"
        ],
        "properties": {
          "session_id": {
            "type": "string"
          }
        }
      }
    },
    {
      "name": "overwatch.tool_execute",
      "description": "Execute a governed tool call (context phase) with timing + freshness metadata.",
      "inputSchema": {
        "type": "object",
        "required": [
          "session_id",
          "tool",
          "input"
        ],
        "properties": {
          "session_id": {
            "type": "string"
          },
          "tool": {
            "type": "string"
          },
          "input": {
            "type": "object"
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "result",
          "capturedAt"
        ],
        "properties": {
          "result": {
            "type": "object"
          },
          "capturedAt": {
            "type": "string"
          },
          "sourceRef": {
            "type": "string"
          }
        }
      }
    },
    {
      "name": "overwatch.action_dispatch",
      "description": "Dispatch a state-changing action with Safe Action Contract enforcement.",
      "inputSchema": {
        "type": "object",
        "required": [
          "session_id",
          "action_contract"
        ],
        "properties": {
          "session_id": {
            "type": "string"
          },
          "action_contract": {
            "type": "object"
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "ack"
        ],
        "properties": {
          "ack": {
            "type": "object"
          }
        }
      }
    },
    {
      "name": "overwatch.verify_run",
      "description": "Run a verifier (e.g., read-after-write) and return pass/fail/inconclusive.",
      "inputSchema": {
        "type": "object",
        "required": [
          "session_id",
          "method",
          "details"
        ],
        "properties": {
          "session_id": {
            "type": "string"
          },
          "method": {
            "type": "string"
          },
          "details": {
            "type": "object"
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "result"
        ],
        "properties": {
          "result": {
            "type": "string"
          },
          "details": {
            "type": "object"
          }
        }
      }
    },
    {
      "name": "overwatch.episode_seal",
      "description": "Seal and return the DecisionEpisode (audit-grade record) for the session.",
      "inputSchema": {
        "type": "object",
        "required": [
          "session_id",
          "episode"
        ],
        "properties": {
          "session_id": {
            "type": "string"
          },
          "episode": {
            "type": "object"
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "sealed"
        ],
        "properties": {
          "sealed": {
            "type": "object"
          }
        }
      }
    },
    {
      "name": "overwatch.drift_emit",
      "description": "Emit a drift event tied to a sealed episode.",
      "inputSchema": {
        "type": "object",
        "required": [
          "drift"
        ],
        "properties": {
          "drift": {
            "type": "object"
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "ok"
        ],
        "properties": {
          "ok": {
            "type": "boolean"
          }
        }
      }
    },
    {
      "name": "iris.query",
      "description": "Query the IRIS operator resolution engine. Supports WHY, WHAT_CHANGED, WHAT_DRIFTED, RECALL, and STATUS query types. Returns structured response with provenance chain and confidence score.",
      "inputSchema": {
        "type": "object",
        "required": ["query_type"],
        "properties": {
          "query_type": {
            "type": "string",
            "enum": ["WHY", "WHAT_CHANGED", "WHAT_DRIFTED", "RECALL", "STATUS"]
          },
          "episode_id": {
            "type": "string",
            "description": "Required for WHY and RECALL queries"
          },
          "text": {
            "type": "string",
            "description": "Free-text query context"
          },
          "claim_id": {
            "type": "string",
            "description": "Target claim ID for WHY queries"
          },
          "decision_type": {
            "type": "string",
            "description": "Filter by decision type"
          }
        }
      }
    },
    {
      "name": "iris.reload",
      "description": "Reload the coherence pipeline from disk. Call after new episodes or drift data have been written to /app/data.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "data_path": {
            "type": "string",
            "description": "Override data directory (default: /app/data)"
          }
        }
      }
    },
    {
      "name": "sharepoint.list",
      "description": "List items from a SharePoint list and return canonical records.",
      "inputSchema": {
        "type": "object",
        "required": ["list_id"],
        "properties": {
          "list_id": {"type": "string", "description": "SharePoint list ID"}
        }
      }
    },
    {
      "name": "sharepoint.get",
      "description": "Get a single SharePoint list item as a canonical record.",
      "inputSchema": {
        "type": "object",
        "required": ["list_id", "item_id"],
        "properties": {
          "list_id": {"type": "string"},
          "item_id": {"type": "string"}
        }
      }
    },
    {
      "name": "sharepoint.sync",
      "description": "Incremental delta sync of a SharePoint list. Returns created/updated counts and records.",
      "inputSchema": {
        "type": "object",
        "required": ["list_id"],
        "properties": {
          "list_id": {"type": "string"}
        }
      }
    },
    {
      "name": "dataverse.list",
      "description": "List records from a Dataverse table and return canonical records.",
      "inputSchema": {
        "type": "object",
        "required": ["table_name"],
        "properties": {
          "table_name": {"type": "string", "description": "Dataverse table name (e.g. accounts, incidents)"}
        }
      }
    },
    {
      "name": "dataverse.get",
      "description": "Get a single Dataverse record by table and record ID.",
      "inputSchema": {
        "type": "object",
        "required": ["table_name", "record_id"],
        "properties": {
          "table_name": {"type": "string"},
          "record_id": {"type": "string", "description": "Dataverse GUID"}
        }
      }
    },
    {
      "name": "dataverse.query",
      "description": "Query a Dataverse table with OData $filter expression.",
      "inputSchema": {
        "type": "object",
        "required": ["table_name", "filter"],
        "properties": {
          "table_name": {"type": "string"},
          "filter": {"type": "string", "description": "OData $filter expression (e.g. $filter=statecode eq 0)"}
        }
      }
    },
    {
      "name": "asksage.query",
      "description": "Query AskSage AI with a prompt. Returns response text, model used, and token count.",
      "inputSchema": {
        "type": "object",
        "required": ["prompt"],
        "properties": {
          "prompt": {"type": "string"},
          "model": {"type": "string", "description": "Model override (optional)"},
          "dataset": {"type": "string", "description": "Dataset to query against (optional)"},
          "persona": {"type": "string", "description": "Persona to use (optional)"}
        }
      }
    },
    {
      "name": "asksage.models",
      "description": "List available AskSage models.",
      "inputSchema": {"type": "object", "properties": {}}
    },
    {
      "name": "asksage.datasets",
      "description": "List available AskSage datasets.",
      "inputSchema": {"type": "object", "properties": {}}
    },
    {
      "name": "asksage.history",
      "description": "Get AskSage query history (user logs).",
      "inputSchema": {
        "type": "object",
        "properties": {
          "limit": {"type": "integer", "description": "Max entries to return (default: 20)"}
        }
      }
    },
    {
      "name": "cortex.complete",
      "description": "Run a Snowflake Cortex AI completion. Returns assembled response text and token usage.",
      "inputSchema": {
        "type": "object",
        "required": ["model", "messages"],
        "properties": {
          "model": {"type": "string", "description": "Cortex model name"},
          "messages": {"type": "array", "items": {"type": "object"}, "description": "Chat messages"},
          "max_tokens": {"type": "integer"},
          "temperature": {"type": "number"}
        }
      }
    },
    {
      "name": "cortex.embed",
      "description": "Generate embeddings via Snowflake Cortex AI.",
      "inputSchema": {
        "type": "object",
        "required": ["model", "texts"],
        "properties": {
          "model": {"type": "string"},
          "texts": {"type": "array", "items": {"type": "string"}}
        }
      }
    },
    {
      "name": "snowflake.query",
      "description": "Execute a SQL query against Snowflake warehouse.",
      "inputSchema": {
        "type": "object",
        "required": ["sql"],
        "properties": {
          "sql": {"type": "string", "description": "SQL statement"}
        }
      }
    },
    {
      "name": "snowflake.tables",
      "description": "List tables in the configured Snowflake database/schema.",
      "inputSchema": {"type": "object", "properties": {}}
    },
    {
      "name": "snowflake.sync",
      "description": "Sync a Snowflake table to canonical records.",
      "inputSchema": {
        "type": "object",
        "required": ["table_name"],
        "properties": {
          "table_name": {"type": "string"},
          "since": {"type": "string", "description": "ISO-8601 timestamp for incremental sync (optional)"}
        }
      }
    },
    {
      "name": "golden_path.run",
      "description": "Run the 7-step Golden Path end-to-end decision governance loop. Connects to a data source, normalizes records, extracts claims, seals an episode, detects drift, patches, and runs IRIS recall.",
      "inputSchema": {
        "type": "object",
        "required": ["source"],
        "properties": {
          "source": {"type": "string", "enum": ["sharepoint", "snowflake", "dataverse", "asksage"]},
          "fixture": {"type": "string", "description": "Path to fixture directory for offline mode"},
          "episode_id": {"type": "string", "description": "Custom episode ID (default: gp-demo)"},
          "list_id": {"type": "string", "description": "SharePoint list ID"},
          "table_name": {"type": "string", "description": "Dataverse table name"},
          "sql": {"type": "string", "description": "Snowflake SQL query"},
          "prompt": {"type": "string", "description": "AskSage prompt"}
        }
      }
    }
  ]
}