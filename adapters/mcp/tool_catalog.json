{
  "name": "sigma-overwatch-mcp",
  "version": "0.2.0",
  "tools": [
    {
      "name": "overwatch.submit_task",
      "description": "Start a supervised decision episode by decisionType (loads DTE) and returns a session_id.",
      "inputSchema": {
        "type": "object",
        "required": [
          "decisionType",
          "payload",
          "actor"
        ],
        "properties": {
          "decisionType": {
            "type": "string"
          },
          "payload": {
            "type": "object"
          },
          "actor": {
            "type": "object",
            "required": [
              "id"
            ],
            "properties": {
              "id": {
                "type": "string"
              },
              "version": {
                "type": "string"
              }
            }
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "session_id"
        ],
        "properties": {
          "session_id": {
            "type": "string"
          }
        }
      }
    },
    {
      "name": "overwatch.tool_execute",
      "description": "Execute a governed tool call (context phase) with timing + freshness metadata.",
      "inputSchema": {
        "type": "object",
        "required": [
          "session_id",
          "tool",
          "input"
        ],
        "properties": {
          "session_id": {
            "type": "string"
          },
          "tool": {
            "type": "string"
          },
          "input": {
            "type": "object"
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "result",
          "capturedAt"
        ],
        "properties": {
          "result": {
            "type": "object"
          },
          "capturedAt": {
            "type": "string"
          },
          "sourceRef": {
            "type": "string"
          }
        }
      }
    },
    {
      "name": "overwatch.action_dispatch",
      "description": "Dispatch a state-changing action with Safe Action Contract enforcement.",
      "inputSchema": {
        "type": "object",
        "required": [
          "session_id",
          "action_contract"
        ],
        "properties": {
          "session_id": {
            "type": "string"
          },
          "action_contract": {
            "type": "object"
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "ack"
        ],
        "properties": {
          "ack": {
            "type": "object"
          }
        }
      }
    },
    {
      "name": "overwatch.verify_run",
      "description": "Run a verifier (e.g., read-after-write) and return pass/fail/inconclusive.",
      "inputSchema": {
        "type": "object",
        "required": [
          "session_id",
          "method",
          "details"
        ],
        "properties": {
          "session_id": {
            "type": "string"
          },
          "method": {
            "type": "string"
          },
          "details": {
            "type": "object"
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "result"
        ],
        "properties": {
          "result": {
            "type": "string"
          },
          "details": {
            "type": "object"
          }
        }
      }
    },
    {
      "name": "overwatch.episode_seal",
      "description": "Seal and return the DecisionEpisode (audit-grade record) for the session.",
      "inputSchema": {
        "type": "object",
        "required": [
          "session_id",
          "episode"
        ],
        "properties": {
          "session_id": {
            "type": "string"
          },
          "episode": {
            "type": "object"
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "sealed"
        ],
        "properties": {
          "sealed": {
            "type": "object"
          }
        }
      }
    },
    {
      "name": "overwatch.drift_emit",
      "description": "Emit a drift event tied to a sealed episode.",
      "inputSchema": {
        "type": "object",
        "required": [
          "drift"
        ],
        "properties": {
          "drift": {
            "type": "object"
          }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": [
          "ok"
        ],
        "properties": {
          "ok": {
            "type": "boolean"
          }
        }
      }
    },
    {
      "name": "iris.query",
      "description": "Query the IRIS operator resolution engine. Supports WHY, WHAT_CHANGED, WHAT_DRIFTED, RECALL, and STATUS query types. Returns structured response with provenance chain and confidence score.",
      "inputSchema": {
        "type": "object",
        "required": ["query_type"],
        "properties": {
          "query_type": {
            "type": "string",
            "enum": ["WHY", "WHAT_CHANGED", "WHAT_DRIFTED", "RECALL", "STATUS"]
          },
          "episode_id": {
            "type": "string",
            "description": "Required for WHY and RECALL queries"
          },
          "text": {
            "type": "string",
            "description": "Free-text query context"
          },
          "claim_id": {
            "type": "string",
            "description": "Target claim ID for WHY queries"
          },
          "decision_type": {
            "type": "string",
            "description": "Filter by decision type"
          }
        }
      }
    },
    {
      "name": "iris.reload",
      "description": "Reload the coherence pipeline from disk. Call after new episodes or drift data have been written to /app/data.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "data_path": {
            "type": "string",
            "description": "Override data directory (default: /app/data)"
          }
        }
      }
    }
  ]
}